$(function(){var n=$("#width"),a=$("#height"),e=$("#calculate"),o=$("#perimeter"),r=$("#area");function c(e){var t=$(e),l=$(e+"-validation-message");return""===t.val()?(l.html("不能为空！"),t.select(),!1):/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(t.val())?!(Number(t.val())<0)||(l.html("数值必须大于0！"),t.select(),!1):(l.html("必须是数值！"),t.select(),!1)}e.click(function(){if(c("#width")&&c("#height")){var e=Number(n.val()),t=Number(a.val()),l=2*(e+t),i=e*t;o.val(l),r.val(i)}}),n.keypress(function(e){var t=e.target.selectionStart,l=e.target.value;if(console.log(t),console.log(l),/[abcdef-zABCDEF-Z~!@#$%^&*()\-=_+[\]{}|;:'",<>/?\\]/.test(e.key))e.preventDefault();else if("e"===e.key){if(-1!==l.indexOf("e")||-1!==l.indexOf("E")||0===t)return void e.preventDefault();if(1===t&&"-"===l.substring(0,1))return void e.preventDefault()}}),a.keypress(function(e){/[abcdef-zABCDEF-Z~!@#$%^&*()\-=_+[\]{}|;:'",<>/?\\]/.test(e.key)&&e.preventDefault()}),n.focusout(function(){c("#width")||n.select(),console.log(c("#width"))}),a.focusout(function(){c("#height")||a.select(),console.log(c("#height"))})});